import{w as u}from"./with-props-b1i4h9El.js";import{p,r as l,l as t}from"./chunk-D52XG6IA-DVTnw_rV.js";import{I as f}from"./input-CuhXqZKM.js";import{u as x}from"./use-toast-rhCGJxoN.js";import"./password-input-5ZAPlaK2.js";import{o as h,s as g,u as j,F as v,a as N,b,c as w,d as y,e as F,L as S,t as C}from"./loading-button-BQfSeoJ5.js";import{u as I}from"./AuthContext-BA6Rtxkc.js";import{g as V}from"./utils-CBmQbvEb.js";import{w as L}from"./web3-BWiGdbZi.js";import{C as T}from"./card-CTjxlscv.js";import"./icons-kazulAEJ.js";import"./createLucideIcon-BizpdrYR.js";import"./x-DdXwIeoP.js";import"./loader-circle-C0w-6Ez6.js";import"./plus-R4PAUIF5.js";import"./chevron-down-CwBKgljo.js";import"./index-B3XE2UaP.js";import"./label-BV3ipPG8.js";import"./index-DE-pzLVP.js";import"./index-DLfo2w2A.js";import"./index-CoB-VLMc.js";import"./index-BzlDct7J.js";const E=h({fullName:g().min(2)});function $(){p();const r=j({resolver:C(E),defaultValues:{fullName:""}}),[i,n]=l.useState(!1),{toast:s}=x();I();const m=async o=>{if(n(!0),!L){s({title:"Σφάλμα",description:"Δεν υπάρχει σύνδεση με το δίκτυο",variant:"destructive"});return}try{const{fullName:e}=o;if(!e){s({title:"Σφάλμα",description:"Το όνομα είναι υποχρεωτικό",variant:"destructive"});return}const c=await V(),a=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];if((await c.methods.getVoter(a).call())[1]){s({title:"Σφάλμα",description:"Είστε ήδη εγγεγραμμένος.",variant:"destructive"});return}const d=await c.methods.registerVoter(a,e).send({from:a});s({title:"Επιτυχία",description:`Ο ψηφοφόρος ${e} εγγράφηκε με επιτυχία.`,variant:"default"}),console.log(`Voter registered: ${e} - Tx: ${d.transactionHash}`)}catch(e){console.error(e),s({title:"Σφάλμα",description:"Κάτι πήγε στραβά",variant:"destructive"})}finally{n(!1)}};return t.jsx("div",{className:"grid gap-6",children:t.jsx(v,{...r,children:t.jsx("form",{className:"space-y-4",onSubmit:r.handleSubmit(m),children:t.jsx("div",{className:"grid gap-4",children:t.jsxs("div",{className:"grid gap-2",children:[t.jsx(N,{control:r.control,name:"fullName",render:({field:o})=>t.jsxs(b,{children:[t.jsx(w,{children:"Οναματεπώνυμο"}),t.jsx(y,{children:t.jsx(f,{...o,placeholder:"Όνοματεπώνυμο",disabled:i})}),t.jsx(F,{})]})}),t.jsx(S,{loading:i,disabled:i,type:"submit",className:"w-full mt-2",children:"Εγγραφή"})]})})})})})}function k(){return t.jsx("div",{className:"flex justify-center items-center",children:t.jsx(T,{className:"p-8",children:t.jsxs("div",{className:"mx-auto flex  flex-col justify-center space-y-6 w-[350px] ",children:[t.jsxs("div",{className:"flex flex-col space-y-2 text-center",children:[t.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Eγγραφή"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Εισάγετε το οναματεπώνυμο σας"})]}),t.jsx(l.Suspense,{fallback:t.jsx("div",{children:"Loading..."}),children:t.jsx($,{})})]})})})}function it({}){return[{title:"Εγγραφή"},{name:"description",content:"Εγγραφή"}]}const ot=u(function(){return t.jsx(k,{})});export{ot as default,it as meta};
