import{r as a,l as r}from"./chunk-D52XG6IA-DVTnw_rV.js";import{B as d}from"./button-33l5vJYl.js";import{C as z}from"./card-CTjxlscv.js";import{R as b,I as E}from"./index-B7XgfpAg.js";import{c as j,g as M}from"./utils-CBmQbvEb.js";import{P as R}from"./plus-R4PAUIF5.js";import{t as x}from"./use-toast-rhCGJxoN.js";import{L as B}from"./label-BV3ipPG8.js";const g=a.forwardRef(({className:c,...m},u)=>r.jsx(b,{ref:u,className:j("peer h-8 w-8 shrink-0 rounded-sm border border-zinc-200 border-zinc-900 shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-zinc-900 data-[state=checked]:text-zinc-50 dark:border-zinc-800 dark:border-zinc-50 dark:focus-visible:ring-zinc-300 dark:data-[state=checked]:bg-zinc-50 dark:data-[state=checked]:text-zinc-900",c),...m,children:r.jsx(E,{className:j("flex items-center justify-center text-current"),children:r.jsx(R,{className:"h-8 w-8fill-white"})})}));g.displayName=b.displayName;function D({disabled:c,refresh:m,setRefresh:u,selectedCandidates:s,setSelectedCandidates:l}){const[f,N]=a.useState([]),[w,v]=a.useState(new Map),[p,y]=a.useState({}),k=n=>{const t=n.reduce((o,i)=>(o[i.party]||(o[i.party]=[]),o[i.party].push(i),o),{});y(t)};return a.useEffect(()=>{(async()=>{try{const o=await(await M()).methods.getAllCandidates().call(),i=o.map(e=>({id:Number(e.id),name:e.name,party:e.party}));N(i);const h=new Map;o.forEach(e=>{h.set(Number(e.id),{id:Number(e.id),name:e.name,party:e.party,voteCount:e.voteCount})}),v(h)}catch(t){x({title:"Σφάλμα",description:t.message,variant:"destructive"})}})()},[m]),a.useEffect(()=>{f.length>0&&k(f)},[f]),r.jsxs("div",{className:"w-full flex flex-col items-center",children:[r.jsxs("div",{className:"flex w-min",children:[r.jsx("h1",{className:"text-2xl font-semibold",children:"Υποψήφιοι"}),r.jsx(d,{variant:"link",onClick:()=>u(!m),children:"Ανανέωση"})]}),r.jsx("ul",{className:"pt-4 w-full flex flex-row gap-2 justify-around flex-wrap",children:Object.keys(p).map(n=>r.jsx("div",{children:r.jsxs(z,{className:"rounded-lg border p-6 w-96 max-w-md  min-h-56 sm:max-w-lg md:max-w-2xl",children:[r.jsx("h1",{className:"text-2xl font-bold",children:n}),r.jsx("h2",{className:"text-sm text-muted-foreground pt-2",children:"Επιλέξτε μέχρι 2 υποψηφίους "}),r.jsx("ul",{className:"pt-2",children:p[n].map(t=>r.jsx("div",{className:"flex items-center pt-2",children:r.jsx(B,{htmlFor:"candidate2",className:"flex-1 cursor-pointer",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-lg",children:t.name}),r.jsx(g,{className:"text-muted-foreground",disabled:c,checked:c||(s==null?void 0:s.includes(t.id)),onClick:()=>{if(s&&(s!=null&&s.some(o=>{var i;return((i=w.get(o))==null?void 0:i.party)!==n}))){x({title:"Σφάλμα",description:"Δεν μπορείτε να ψηφίσετε υποψηφίους από διαφορετικά κόμματα",variant:"destructive"});return}s!=null&&s.includes(t.id)?l&&l(s.filter(o=>o!==t.id)):(s==null?void 0:s.length)===2?x({title:"Σφάλμα",description:"Μπορείτε να επιλέξετε μόνο 2 υποψηφίους",variant:"destructive"}):l&&l([...s,t.id])}})]})})},t.id))})]})},n))})]})}export{D as C};
