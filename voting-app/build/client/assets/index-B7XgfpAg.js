import{r as s,l as k}from"./chunk-D52XG6IA-DVTnw_rV.js";import{u as O}from"./index-B3XE2UaP.js";import{d as _,a as B,b as D,c as P,P as H}from"./index-Due4X9lb.js";import{P as g}from"./index-DLfo2w2A.js";function M(e){const r=s.useRef({value:e,previous:e});return s.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}function N(e){const[r,t]=s.useState(void 0);return _(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let u,n;if("borderBoxSize"in o){const d=o.borderBoxSize,p=Array.isArray(d)?d[0]:d;u=p.inlineSize,n=p.blockSize}else u=e.offsetWidth,n=e.offsetHeight;t({width:u,height:n})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else t(void 0)},[e]),r}var S="Checkbox",[L,J]=B(S),[K,q]=L(S),z=s.forwardRef((e,r)=>{const{__scopeCheckbox:t,name:a,checked:i,defaultChecked:o,required:u,disabled:n,value:d="on",onCheckedChange:p,form:h,...v}=e,[f,C]=s.useState(null),m=O(r,c=>C(c)),y=s.useRef(!1),R=f?h||!!f.closest("form"):!0,[b=!1,E]=D({prop:i,defaultProp:o,onChange:p}),A=s.useRef(b);return s.useEffect(()=>{const c=f==null?void 0:f.form;if(c){const x=()=>E(A.current);return c.addEventListener("reset",x),()=>c.removeEventListener("reset",x)}},[f,E]),k.jsxs(K,{scope:t,state:b,disabled:n,children:[k.jsx(g.button,{type:"button",role:"checkbox","aria-checked":l(b)?"mixed":b,"aria-required":u,"data-state":j(b),"data-disabled":n?"":void 0,disabled:n,value:d,...v,ref:m,onKeyDown:P(e.onKeyDown,c=>{c.key==="Enter"&&c.preventDefault()}),onClick:P(e.onClick,c=>{E(x=>l(x)?!0:!x),R&&(y.current=c.isPropagationStopped(),y.current||c.stopPropagation())})}),R&&k.jsx(T,{control:f,bubbles:!y.current,name:a,value:d,checked:b,required:u,disabled:n,form:h,style:{transform:"translateX(-100%)"},defaultChecked:l(o)?!1:o})]})});z.displayName=S;var w="CheckboxIndicator",I=s.forwardRef((e,r)=>{const{__scopeCheckbox:t,forceMount:a,...i}=e,o=q(w,t);return k.jsx(H,{present:a||l(o.state)||o.state===!0,children:k.jsx(g.span,{"data-state":j(o.state),"data-disabled":o.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...e.style}})})});I.displayName=w;var T=e=>{const{control:r,checked:t,bubbles:a=!0,defaultChecked:i,...o}=e,u=s.useRef(null),n=M(t),d=N(r);s.useEffect(()=>{const h=u.current,v=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(v,"checked").set;if(n!==t&&C){const m=new Event("click",{bubbles:a});h.indeterminate=l(t),C.call(h,l(t)?!1:t),h.dispatchEvent(m)}},[n,t,a]);const p=s.useRef(l(t)?!1:t);return k.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??p.current,...o,tabIndex:-1,ref:u,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function l(e){return e==="indeterminate"}function j(e){return l(e)?"indeterminate":e?"checked":"unchecked"}var Q=z,U=I;export{U as I,Q as R,N as u};
